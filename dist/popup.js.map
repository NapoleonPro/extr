{"version":3,"file":"popup.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://extr/./src/popup/popup.ts"],"sourcesContent":["\"use strict\";\n// Popup Controller\n// File: src/popup/popup.ts\nconsole.log('Popup loaded!');\nconst startBtn = document.getElementById('startBtn');\nconst stopBtn = document.getElementById('stopBtn');\nlet isTranscribing = false;\n// Check if content script is loaded\nasync function ensureContentScriptLoaded(tabId) {\n    try {\n        // Try to ping content script\n        const response = await chrome.tabs.sendMessage(tabId, { action: 'ping' });\n        return true;\n    }\n    catch (error) {\n        // Content script not loaded, need to inject\n        console.log('Content script not loaded, injecting...');\n        try {\n            await chrome.scripting.executeScript({\n                target: { tabId },\n                files: ['content.js']\n            });\n            // Wait a bit for script to initialize\n            await new Promise(resolve => setTimeout(resolve, 100));\n            return true;\n        }\n        catch (injectError) {\n            console.error('Failed to inject content script:', injectError);\n            return false;\n        }\n    }\n}\n// Start transcription\nstartBtn?.addEventListener('click', async () => {\n    console.log('Start clicked!');\n    try {\n        // Get active tab\n        const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n        if (!tab.id) {\n            console.error('No active tab');\n            alert('Error: No active tab found');\n            return;\n        }\n        // Ensure content script is loaded\n        const isLoaded = await ensureContentScriptLoaded(tab.id);\n        if (!isLoaded) {\n            alert('Error: Cannot load extension on this page. Try a regular webpage (not chrome:// or extension pages)');\n            return;\n        }\n        // Send message to content script\n        chrome.tabs.sendMessage(tab.id, { action: 'start' }, (response) => {\n            if (chrome.runtime.lastError) {\n                console.error('Error:', chrome.runtime.lastError.message);\n                alert('Error: ' + chrome.runtime.lastError.message);\n                return;\n            }\n            console.log('Response:', response);\n            isTranscribing = true;\n            updateButtons();\n        });\n    }\n    catch (error) {\n        console.error('Error starting transcription:', error);\n        alert('Error: ' + error);\n    }\n});\n// Stop transcription\nstopBtn?.addEventListener('click', async () => {\n    console.log('Stop clicked!');\n    try {\n        const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n        if (!tab.id)\n            return;\n        chrome.tabs.sendMessage(tab.id, { action: 'stop' }, (response) => {\n            console.log('Response:', response);\n            isTranscribing = false;\n            updateButtons();\n        });\n    }\n    catch (error) {\n        console.error('Error stopping transcription:', error);\n    }\n});\nfunction updateButtons() {\n    if (isTranscribing) {\n        startBtn.disabled = true;\n        stopBtn.disabled = false;\n    }\n    else {\n        startBtn.disabled = false;\n        stopBtn.disabled = true;\n    }\n}\n"],"names":[],"sourceRoot":""}